{"version":3,"sources":["js/main.js"],"names":["canvas","document","querySelector","ctx","getContext","subUnits","sizes","colors","height","documentElement","clientHeight","width","clientWidth","lineWidth","isPress","lastPoint","mouseStaus","is_touch_device","console","log","addEventListener","mousedown","e","x","touches","clientX","y","clientY","mouseup","draw","newPoint","beginPath","moveTo","lineTo","closePath","stroke","clearRect","prefixes","split","mq","query","window","matchMedia","matches","DocumentTouch","join","_color","target","className","forEach","color","strokeStyle","search","subUnitsClick","subUnit","getAttribute","style","cursor","fileName","prompt","link","createElement","download","href","toDataURL","click"],"mappings":"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","file":"main.fb6bbcaf.map","sourceRoot":"..","sourcesContent":["// 还有移动端适配\n// 画笔颜色\n\nlet canvas = document.querySelector(\"canvas\");\nlet ctx = canvas.getContext(\"2d\");\nlet subUnits = document.querySelector(\".sub-units\");\nlet sizes = document.querySelector('.sizes') ;\nlet colors = document.querySelector('.colors') ;\n\n\n\n\ncanvas.height = document.documentElement.clientHeight;\ncanvas.width = document.documentElement.clientWidth;\nctx.lineWidth = 2;\n\n//状态\nisPress = false;\nlastPoint = null;\nmouseStaus = 'pen'\n\n\n\nif(is_touch_device()){\n  // 触摸\n  console.log('11')\ncanvas.addEventListener(\"touchstart\", function mousedown(e) {\n  isPress = true;\n  lastPoint = { x: e.touches[0].clientX, y: e.touches[0].clientY };\n});\ncanvas.addEventListener(\"touchend\", function mouseup(e) {\n\n  isPress = false;\n});\ncanvas.addEventListener(\"touchmove\", function draw(e) {\n\n  if (!isPress) return;\n  newPoint = { x: e.touches[0].clientX, y: e.touches[0].clientY };\n\n  if(mouseStaus === 'pen'){\n    ctx.beginPath();\n    ctx.moveTo(lastPoint.x, lastPoint.y);\n    ctx.lineTo(newPoint.x, newPoint.y);\n    ctx.closePath();\n    ctx.stroke();\n  }else if(mouseStaus === 'eraser'){\n    ctx.clearRect(newPoint.x,newPoint.y,16,16)\n    console.log(newPoint.x,newPoint.y,16,16)\n  }else{\n    console.log('你发现了第三种情况，报告 BUG')\n  }\n  lastPoint = newPoint;\n});\n}else{\n  // 不支持触摸\n\ncanvas.addEventListener(\"mousedown\", function mousedown(e) {\n  isPress = true;\n  lastPoint = { x: e.clientX, y: e.clientY };\n});\ncanvas.addEventListener(\"mouseup\", function mouseup(e) {\n\n  isPress = false;\n});\ncanvas.addEventListener(\"mousemove\", function draw(e) {\n  if (!isPress) return;\n  newPoint = { x: e.clientX, y: e.clientY };\n  console.log(mouseStaus)\n\n  if(mouseStaus === 'pen'){\n    ctx.beginPath();\n    ctx.moveTo(lastPoint.x, lastPoint.y);\n    ctx.lineTo(newPoint.x, newPoint.y);\n    ctx.closePath();\n    ctx.stroke();\n  }else if(mouseStaus === 'eraser'){\n    ctx.clearRect(newPoint.x,newPoint.y,16,16)\n    console.log(newPoint.x,newPoint.y,16,16)\n  }else{\n    console.log('你发现了第三种情况，报告 BUG')\n  }\n  lastPoint = newPoint;\n});\n}\nfunction is_touch_device() {\n  var prefixes = ' -webkit- -moz- -o- -ms- '.split(' ');\n  var mq = function(query) {\n    return window.matchMedia(query).matches;\n  }\n\n  if (('ontouchstart' in window) || window.DocumentTouch && document instanceof DocumentTouch) {\n    return true;\n  }\n\n  // include the 'heartz' as a way to have a non matching MQ to help terminate the join\n  // https://git.io/vznFH\n  var query = ['(', prefixes.join('touch-enabled),('), 'heartz', ')'].join('');\n  return mq(query);\n}\n\nconsole.log(subUnits)\ncolors.addEventListener(\"click\",function (e){\n  let _color\n  e.target.className.split(' ').forEach(color => {\n    if (color === 'red') _color = 'red';\n    else if(color === 'black') _color = 'black';\n    else if(color === 'green') _color = 'green';\n    else{\n      console.log('color出错')\n    }\n  });\n  console.log(_color)\n  switch (_color) {\n    case \"red\":\n      ctx.strokeStyle='red'\n      break;\n    case \"black\":\n      ctx.strokeStyle='black'\n      break;\n      case \"green\":\n      ctx.strokeStyle='green'\n      break;\n    default:\n      console.log('switch默认结果');\n  }\n})\nsizes.addEventListener(\"click\",function (e){\n\n  if(e.target.className.search('line-1')!=-1) {ctx.lineWidth=1;}\n  else if(e.target.className.search('line-3')!=-1) ctx.lineWidth=3;\n  else if(e.target.className.search('line-5')!=-1) ctx.lineWidth=5;\n  else{\n    console.log('lineWidth出错',e.target.className)\n  }\n})\nsubUnits.addEventListener(\"click\", function subUnitsClick(e) {\n  let subUnit = e.target.getAttribute(\"name\");\n  switch (subUnit) {\n    case \"pen\":\n    canvas.style.cursor='auto'\n    mouseStaus='pen'\n      break;\n    case \"eraser\":\n    mouseStaus='eraser'\n    canvas.style.cursor=`url(\"http://localhost:1234/f.ad522018.ico\"), auto`\n      break;\n    case \"clear\":\n        ctx.clearRect(0,0,canvas.width,canvas.height)\n      console.log(\"3\");\n      break;\n    case \"download\":\n      let fileName=prompt('请输入文件名','filename.png')\n      if(!fileName) return\n      var link = document.createElement('a');\n      link.download = fileName;\n      link.href = canvas.toDataURL()\n      link.click();\n        console.log(\"4\");\n      break;\n    default:\n      console.log(e.target);\n  }\n});\nconsole.log(subUnits)\n"]}